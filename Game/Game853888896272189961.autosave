Player player;
ArrayList<Block> map = new ArrayList<Block>();
//Timer startTimer;
boolean isStartMenuOn;
ArrayList<Level> levels;
boolean Left;
boolean Right;
boolean Up;
boolean Down;
boolean Shift;

void setup () {
  size(1000, 500);
  //startTimer = new Timer(160);
  isStartMenuOn = true;
  Left = false;
  Right = false;
  Up = false;
  Down = false;
  Shift = false;

  levels = new ArrayList<Level>();
  Map official = new Map("BlockMap.txt");
  map = official.map;
  int endIndex = official.cols;

  player = new Player(16*2+16, height-32*2);
  ArrayList<Enemy> enemies = new ArrayList<Enemy>();
  Level lvl1 = new Level(map, player, enemies, new float[]{16*2+8, height-16*2}, endIndex * 16);
  levels.add(lvl1);
  /*
  for (int i = 0; i < lvl1.map.size(); i++) {
    System.out.println(lvl1.map.get(i));
    lvl1.map.remove(i);
    i -= 1;
  }*/

  for (int x = 16; x <= lvl1.end+16; x += 32) {
    lvl1.map.add(new Floor(x, height));
    //lvl1.map.add(new Floor(x, height-32));
    //if (x > width*0.25 && x < width*0.75) {
    //  lvl1.map.add(new Brick(null, x, height-32*2));
    //}
    //if (x > width*0.25+32 && x < width*0.75) {
    //  lvl1.map.add(new Brick(null, x, height-32*3));
    //}
    //if (x > width*0.25+32*2 && x < width*0.75) {
    //  lvl1.map.add(new Brick(null, x, height-32*4));
    //}
    //if (x > width*0.25+32*3 && x < width*0.75) {
    //  lvl1.map.add(new Brick(null, x, height-32*5));
    }
  
  enemies.add(new Goomba(lvl1.end-32, height-32*2));
}

void draw() {
  Level currentlvl = levels.get(0);
  background(95, 200, 245);
<<<<<<< HEAD
  image(loadImage("Textures/castle.png"), currentlvl.start[0], currentlvl.start[1]-32*2);
=======
  //image(loadImage("Textures/castle.png"), currentlvl.start[0], currentlvl.start[1]-16*2);
>>>>>>> 99b57b33aaf2b1401132c48d6868dc6f6f25a5d5
  imageMode(CENTER);

  for (Block b : currentlvl.map) {
    b.display(0, 1, 1);
    b.event(currentlvl);
  }
  
  for (Enemy enemies : currentlvl.enemies){
    enemies.hitBoundary(levels.get(0));
    enemies.move();
    enemies.display(0, 2);
  }

  if (!currentlvl.cleared) {
    player.hitBoundary(levels.get(0));
    player.move();
    player.display();
    text("Coords: " + player.x + ", " + player.y, 20, 20);
  }
}

//movement keys, powerups
void keyPressed () {
  if (key == CODED) {
    switch(keyCode) {
    case LEFT:
      Left = true;
      break;
    case RIGHT:
      Right = true;
      break;
    case UP:
      Up = true;
      break;
    case DOWN:
      Down = true;
      break;
    case SHIFT:
      Shift = true;
      break;
    }
  }
}

void keyReleased () {
  if (key == CODED) {
    switch(keyCode) {
    case LEFT:
      Left = false;
      break;
    case RIGHT:
      Right = false;
      break;
    case UP:
      Up = false;
      break;
    case DOWN:
      Down = false;
      break;
    case SHIFT:
      Shift = false;
      break;
    }
  }
}

//menu interactions
void mouseClicked () {
}

/*void scroll() {
  if (player.x >= 
}*/
